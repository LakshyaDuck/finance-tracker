{% extends "layout.html" %}

{% block title %}Transactions{% endblock %}
{% block nav_title %}Transactions{% endblock %}

{% block main %}
<div class="mb-3" style="display: flex; gap: 1rem; justify-content: space-between; align-items: center;">
    <h1 style="font-size: 2rem; font-weight: 700;">All Transactions</h1>
    <a href="/add_transaction" class="btn btn-primary">Add Transaction</a>
</div>

{% if transactions %}
<div class="card" style="padding: 0; overflow: hidden;">
    <table class="table">
        <thead>
            <tr>
                <th>Date</th>
                <th>Type</th>
                <th>Category/Person</th>
                <th>Description</th>
                <th>Amount</th>
                <th>Action</th>
            </tr>
        </thead>
        <tbody>
            {% for transaction in transactions %}
            <tr>
                <td>{{ transaction.date }}</td>
                <td>
                    {% if transaction.type == 'income' %}
                        <span class="text-success">Income</span>
                    {% elif transaction.type == 'expense' %}
                        <span class="text-danger">Expense</span>
                    {% else %}
                        <span style="color: var(--text-secondary);">
                            {% if transaction.direction == 'lent' %}Lent{% else %}Borrowed{% endif %}
                        </span>
                    {% endif %}
                </td>
                <td>
                    {% if transaction.type == 'personal' %}
                        {{ transaction.person_name }}
                    {% else %}
                        {{ transaction.name }}
                    {% endif %}
                </td>
                <td>{{ transaction.description or '-' }}</td>
                <td style="font-weight: 600;">
                    {% if transaction.type == 'income' %}
                        <span class="text-success">+{{ transaction.amount }}</span>
                    {% elif transaction.type == 'expense' %}
                        <span class="text-danger">-{{ transaction.amount }}</span>
                    {% else %}
                        {{ transaction.amount }}
                    {% endif %}
                </td>
                <td>
                    <form action="/delete_transaction" method="post" style="margin: 0;">
                        <input type="hidden" name="transaction_id" value="{{ transaction.id }}">
                        <button type="submit" class="btn btn-danger" style="padding: 0.5rem 1rem; font-size: 0.9rem;"
                                onclick="return confirm('Are you sure you want to delete this transaction?')">
                            Delete
                        </button>
                    </form>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% else %}
<div class="card text-center" style="padding: 3rem;">
    <p style="color: var(--text-secondary); font-size: 1.1rem; margin-bottom: 1.5rem;">No transactions yet</p>
    <a href="/add_transaction" class="btn btn-primary" style="margin: 0 auto;">Add Your First Transaction</a>
</div>
{% endif %}
{% endblock %}
